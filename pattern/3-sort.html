<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        /*function quickSort(arr) {
            if(arr.length<2) {
                return arr
            }
            const pivotIndex = Math.floor(arr.length/2)
            // const pivot = arr[pivotIndex]
            /** 2018/5/14
             *author: zrd
             *功能: 为何用 splice
             *
             * splice可以改变原来的数组  删除中间项
            */
        /*

            const pivot = arr.splice(pivotIndex,1)[0]
            const leftArr = []
            const rightArr = []
            for (let i = 0; i < arr.length; i++) {
                if(arr[i]<pivot){
                    leftArr.push(arr[i])
                }else {
                    rightArr.push(arr[i])
                }
            }
            return quickSort(leftArr).concat([pivot],quickSort(rightArr))
        }

        var arr = [1,7,2,4,0,3]
        console.log(quickSort(arr))*/




        /** 2018/5/14
         *author: zrd
         *功能: 原地交换函数
        */
        function swap(array,a,b) {
            [array[a],array[b]] = [array[b],array[a]]
            return array
        }
        /** 2018/5/14
         *author: zrd
         *功能: 比较大小
        */

        function compare(a,b) {
            if(a === b) {
                return 0
            }
            return a<b? -1 : 1
        }


        function partition(array,left,right) {
            const pivot = array[Math.floor((left+right)/2)]
            let i = left
            let j = right

            while(i<= j){
                while(compare(array[i],pivot) === -1) {
                    i++
                }
                while(compare(pivot,array[j]) === -1) {
                    j--
                }
                if(i<=j) {
                    swap(array,i,j)
                    i++
                    j--
                }
            }
            return i
        }


        function quick(array,left,right) {
            let index
            if(array.length>1) {
                index = partition(array,left,right)
                if(left < index -1){
                    quick(array,left,index-1)
                }
                if(index < right) {
                    quick(array,index,right)
                }
            }
            return array
        }

        function quickSort(array) {
            return quick(array,0,array.length-1)
        }

        console.time('xm')
        
        console.log(quickSort([3,7,1,5,2]))
        console.timeEnd("xm")

    </script>
</body>
</html>